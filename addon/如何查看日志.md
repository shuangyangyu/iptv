# 如何查看 Supervisor 构建日志

## 方法 1：通过 HA UI（最简单）

### 步骤：

1. **打开 Home Assistant**
   - 访问：http://192.168.1.249:8123

2. **进入 Supervisor**
   - 在左侧边栏找到 "Supervisor" 图标
   - 如果没有看到，可能需要：
     - 确保使用的是 Home Assistant Supervised 或 OS（不是 Core）
     - 检查用户权限

3. **查看系统信息**
   - 在 Supervisor 页面，点击 "System" 标签
   - 查看页面上的日志信息

4. **下载诊断信息**
   - 在 System 页面，点击右上角的 "..." 菜单
   - 选择 "Download diagnostics"
   - 这会下载一个包含所有日志的压缩包

## 方法 2：通过 SSH（如果有访问权限）

### 步骤：

1. **SSH 到 HA 设备**
   ```bash
   ssh root@192.168.1.249
   # 或使用你的 HA 用户名
   ```

2. **查看 Supervisor 日志**
   ```bash
   ha supervisor logs | grep -A 50 "iptv_server"
   ```

3. **或者查看完整日志**
   ```bash
   ha supervisor logs > /tmp/supervisor_logs.txt
   cat /tmp/supervisor_logs.txt | grep -i "iptv\|build\|error"
   ```

## 方法 3：通过终端 Add-on（如果已安装）

1. **安装 Terminal & SSH addon**（如果还没有）
   - Supervisor → Add-on Store
   - 搜索 "Terminal & SSH"
   - 安装并启动

2. **在终端中运行**
   ```bash
   ha supervisor logs | grep -A 50 "iptv_server"
   ```

## 方法 4：直接查看 Docker 日志

如果你有直接访问 HA 设备的权限：

```bash
# SSH 到 HA 设备后
docker logs hassio_supervisor 2>&1 | grep -A 50 "iptv"
```

## 如果找不到 Supervisor

### 检查 HA 安装类型：

1. **Home Assistant Core**
   - 没有 Supervisor
   - 无法安装 addon
   - 需要使用 docker-compose 直接运行

2. **Home Assistant Supervised**
   - 应该有 Supervisor
   - 在侧边栏应该能看到 Supervisor 图标

3. **Home Assistant OS**
   - 肯定有 Supervisor
   - 在侧边栏应该能看到 Supervisor 图标

### 如果确实没有 Supervisor：

你可以：
1. 使用现有的 `docker-compose.yml` 直接运行服务
2. 或者升级到 Home Assistant Supervised/OS

## 替代方案：查看 HA 日志中的错误

即使无法直接查看 Supervisor 日志，也可以在 HA 日志中查找相关信息：

1. **进入 HA 日志页面**
   - http://192.168.1.249:8123/config/logs

2. **搜索关键词**
   - 搜索 "iptv"
   - 搜索 "addon"
   - 搜索 "build"
   - 搜索 "error"

3. **查看完整错误信息**
   - 点击错误条目查看详细信息
   - 复制完整的错误堆栈

## 需要的信息

请提供以下信息以便诊断：

1. **错误信息**（从 HA 日志中）
2. **HA 安装类型**（Core/Supervised/OS）
3. **是否有 SSH 访问权限**
4. **网络连接状态**（能否访问 GitHub）

## 快速诊断命令

如果你有 SSH 访问权限，运行以下命令：

```bash
# 检查 HA 类型
ha info

# 查看 Supervisor 状态
ha supervisor info

# 查看 addon 列表
ha addons

# 查看构建日志
ha supervisor logs | tail -100
```

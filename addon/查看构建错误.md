# 查看 IPTV Server Addon 构建错误

## 快速方法：通过 SSH（最直接）

如果你有 SSH 访问权限，运行：

```bash
# SSH 到 HA 设备
ssh root@192.168.1.249
# 或使用你的用户名

# 查看 Supervisor 日志
ha supervisor logs | grep -A 50 "iptv_server"

# 或者查看最近的错误
ha supervisor logs | tail -200 | grep -i "iptv\|build\|error"
```

## 通过 HA UI

### 步骤 1：进入 Supervisor

1. 打开 Home Assistant：http://192.168.1.249:8123
2. 在左侧边栏找到 **"Supervisor"** 图标
3. 点击进入

### 步骤 2：查看 System 页面

1. 在 Supervisor 页面，点击 **"System"** 标签（通常在顶部）
2. 在 System 页面中：
   - 查看页面上的日志信息
   - 或者查找 "Logs" 或 "Diagnostics" 按钮

### 步骤 3：下载诊断信息

1. 在 System 页面右上角，点击 **"..."** 菜单（三个点）
2. 选择 **"Download diagnostics"**
3. 这会下载一个包含所有日志的压缩包
4. 解压后查找与 "iptv_server" 相关的日志

## 如果找不到 System 标签

### 检查 Supervisor 版本

可能你的 Supervisor 版本较旧，界面不同。尝试：

1. **查看 Add-on Store**
   - 进入 Supervisor → Add-on Store
   - 查看是否有 "IPTV Server" addon
   - 如果有，点击它查看详细信息
   - 可能显示错误信息

2. **查看 HA 日志**
   - 进入：设置 → 系统 → 日志
   - 或直接访问：http://192.168.1.249:8123/config/logs
   - 搜索 "iptv" 或 "addon" 或 "build"

## 常见错误信息

### 1. COPY 路径错误
```
lstat iptv_sever/api/requirements.txt: no such file or directory
```
**说明：** 构建时找不到文件，可能是路径问题

### 2. 依赖安装失败
```
ERROR: Could not find a version that satisfies...
```
**说明：** Python 依赖包安装失败

### 3. udpxy 编译失败
```
make: *** [udpxy] Error 1
```
**说明：** udpxy 编译失败（已添加容错处理）

### 4. 网络错误
```
fatal: unable to access 'https://github.com/...'
```
**说明：** 网络连接问题

## 替代方案：使用 docker-compose

如果 addon 安装一直失败，可以直接使用 docker-compose：

```bash
# 在 HA 设备上
cd /path/to/iptv
docker-compose up -d
```

功能完全相同，不需要 Supervisor。

## 需要帮助？

请提供：
1. Supervisor 日志中的具体错误信息
2. 或者 HA 日志中的相关错误
3. 或者告诉我你看到了什么界面

这样我可以更准确地帮你解决问题。
